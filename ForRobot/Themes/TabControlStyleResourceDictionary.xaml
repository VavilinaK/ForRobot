<ResourceDictionary x:Class="ForRobot.Themes.MetroStyleResourceDictionary"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:ForRobot.Themes"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib"
                    xmlns:detals="clr-namespace:ForRobot.Model.Detals">

    <BitmapImage x:Key="ImageRectangular" UriSource="/InterfaceOfRobots;component/Themes/Images/Rectangular.png"/>
    <BitmapImage x:Key="ImageParallelogramLeft" UriSource="/InterfaceOfRobots;component/Themes/Images/ParallelogramLeft.png"/>
    <BitmapImage x:Key="ImageParallelogramRight" UriSource="/InterfaceOfRobots;component/Themes/Images/ParallelogramRight.png"/>
    <BitmapImage x:Key="ImageTrapezoidTop" UriSource="/InterfaceOfRobots;component/Themes/Images/TrapezoidTop.png"/>
    <BitmapImage x:Key="ImageTrapezoidBottom" UriSource="/InterfaceOfRobots;component/Themes/Images/TrapezoidBottom.png"/>

    <!--Общие параметры (настила с ребром)-->
    <DataTemplate x:Key="PlitaTemplateStyle" DataType="{x:Type ContentControl}">
        <DataTemplate.Resources>
            <Style x:Key="TextBase" TargetType="{x:Type FrameworkElement}">
                <Setter Property="TextElement.FontSize" Value="{StaticResource FontSizeNP4}"/>
                <Setter Property="TextElement.FontFamily" Value="{StaticResource DefaultFont}"/>
                <Setter Property="TextElement.Foreground" Value="{StaticResource ThemeFgP2Brush}"/>
            </Style>

            <Style TargetType="{x:Type Label}" BasedOn="{StaticResource TextBase}">
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
            </Style>

            <Style x:Key="TextBoxBase" TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBase}">
                <Setter Property="Padding" Value="5"/>
                <Setter Property="Height" Value="37"/>
                <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                <EventSetter Event="PreviewMouseDown" Handler="IgnoreMouseButton"/>
                <EventSetter Event="GotFocus" Handler="Text_GotFocus"/>
            </Style>

            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxBase}"></Style>

            <Style TargetType="{x:Type RadioButton}" BasedOn="{StaticResource TextBase}">
                <Setter Property="Margin" Value="0, 4"/>
            </Style>
        </DataTemplate.Resources>

        <Grid Height="Auto" DataContext="{Binding Path=DataContext.DetalObject, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*" MinWidth="150"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Row="0" Grid.ColumnSpan="2" Margin="0, 10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <RadioButton Grid.Column="0" IsChecked="{Binding Path=ScoseType, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={x:Static detals:ScoseTypes.Rect}, Mode=TwoWay}"
                             Style="{StaticResource toggleButtonScosStyle}" ToolTip="Прямоугольная форма">

                    <RadioButton.Template>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Border BorderThickness="0" CornerRadius="3" Style="{StaticResource toggleButtonScosTemplateStyle}">
                                <Image Source="{StaticResource ImageRectangular}"  Stretch="Fill"/>
                            </Border>
                        </ControlTemplate>
                    </RadioButton.Template>
                </RadioButton>

                <RadioButton Grid.Column="1" IsChecked="{Binding Path=ScoseType, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={x:Static detals:ScoseTypes.SlopeRight}, Mode=TwoWay}"
                                             Style="{StaticResource toggleButtonScosStyle}" ToolTip="Наклон вправо">
                    <RadioButton.Template>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Border BorderThickness="0" CornerRadius="3" Style="{StaticResource toggleButtonScosTemplateStyle}">
                                <Image Source="{StaticResource ImageParallelogramRight}"  Stretch="Fill"/>
                            </Border>
                        </ControlTemplate>
                    </RadioButton.Template>
                </RadioButton>

                <RadioButton Grid.Column="2" IsChecked="{Binding Path=ScoseType, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={x:Static detals:ScoseTypes.SlopeLeft}, Mode=TwoWay}"
                                             Style="{StaticResource toggleButtonScosStyle}" ToolTip="Наклон влево">

                    <RadioButton.Template>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Border BorderThickness="0" CornerRadius="3" Padding="2" Style="{StaticResource toggleButtonScosTemplateStyle}">
                                <Image Source="{StaticResource ImageParallelogramLeft}" Stretch="Fill"/>
                            </Border>
                        </ControlTemplate>
                    </RadioButton.Template>
                </RadioButton>

                <RadioButton Grid.Column="3" IsChecked="{Binding Path=ScoseType, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={x:Static detals:ScoseTypes.TrapezoidTop}, Mode=TwoWay}"
                                             Style="{StaticResource toggleButtonScosStyle}" ToolTip="Трапеция">

                    <RadioButton.Template>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Border BorderThickness="0" CornerRadius="3" Padding="2" Style="{StaticResource toggleButtonScosTemplateStyle}">
                                <Image Source="{StaticResource ImageTrapezoidTop}" Stretch="Fill"/>
                            </Border>
                        </ControlTemplate>
                    </RadioButton.Template>
                </RadioButton>

                <RadioButton Grid.Column="4" IsChecked="{Binding Path=ScoseType, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={x:Static detals:ScoseTypes.TrapezoidBottom}, Mode=TwoWay}"
                                             Style="{StaticResource toggleButtonScosStyle}" ToolTip="Перевёрнутая трапеция">
                    <RadioButton.Template>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Border BorderThickness="0" CornerRadius="3" Style="{StaticResource toggleButtonScosTemplateStyle}">
                                <Image Source="{StaticResource ImageTrapezoidBottom}"  Stretch="Fill"/>
                            </Border>
                        </ControlTemplate>
                    </RadioButton.Template>
                </RadioButton>
            </Grid>

            <Label Grid.Row="1" Grid.Column="0" Content="Длина настила, мм."/>
            <Label Grid.Row="2" Grid.Column="0" Content="Ширина настила, мм."/>
            <Label Grid.Row="3" Grid.Column="0" Content="Расстояние до осевой линии первого ребра сверху, мм.">
                <Label.Style>
                    <Style TargetType="{x:Type Label}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}">
                                <Setter Property="Height" Value="0"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Label.Style>
            </Label>
            <Label Grid.Row="5" Grid.Column="0" Content="Расстояние до торца ребра слева, мм.">
                <Label.Style>
                    <Style TargetType="{x:Type Label}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}">
                                <Setter Property="Height" Value="0"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Label.Style>
            </Label>
            <Label Grid.Row="6" Grid.Column="0" Content="Расстояние до торца ребра справа, мм.">
                <Label.Style>
                    <Style TargetType="{x:Type Label}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}">
                                <Setter Property="Height" Value="0"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Label.Style>
            </Label>
            <Label Grid.Row="9" Grid.Column="0" Content="Скос слева, мм." FontSize="16"/>
            <Label Grid.Row="10" Grid.Column="0" Content="Скос справа, мм." FontSize="16"/>
            <Label Grid.Row="11" Grid.Column="0" Content="Количество ребер, шт." FontSize="16"/>

            <GroupBox Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" Header="Расстояние между осевыми линиями рёбер, мм." FontSize="16" Margin="4">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <Grid.Resources>
                        <Style TargetType="{x:Type RadioButton}">
                            <Setter Property="FontSize" Value="16"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                            <Setter Property="HorizontalContentAlignment" Value="Left"/>

                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=IsChecked, RelativeSource={RelativeSource Self}}" Value="True">
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>

                        <Style x:Key="groupBoxParalleleRibs" TargetType="{x:Type GroupBox}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource False}">
                                    <Setter Property="Height" Value="0"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Grid.Resources>

                    <RadioButton Grid.Row="0" Grid.Column="0" Content="Одинаковое" Margin="0,0,0,5"
                                 IsChecked="{Binding Path=DiferentDistance, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <RadioButton Grid.Row="0" Grid.Column="1" Content="Разное" Margin="0,0,0,5"
                                 IsChecked="{Binding Path=DiferentDistance, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <GroupBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Header="Рёбра" Style="{StaticResource groupBoxParalleleRibs}">
                        <Grid Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <RadioButton Grid.Column="0" Content="Параллельны"
                                         IsChecked="{Binding Path=ParalleleRibs, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                            <RadioButton Grid.Column="1" Content="Не параллельны"
                                         IsChecked="{Binding Path=ParalleleRibs, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>
                        </Grid>
                    </GroupBox>

                    <ContentControl Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                        <ContentControl.Resources>
                            <Style TargetType="{x:Type TextBox}">
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <EventSetter Event="PreviewMouseDown"  Handler="IgnoreMouseButton"/>
                                <EventSetter Event="GotFocus"  Handler="Text_GotFocus"/>
                            </Style>

                            <Style TargetType="{x:Type DataGrid}">
                                <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type ContentControl}, Mode=FindAncestor}}"/>
                                <Setter Property="ItemsSource" Value="{Binding Path=RibsCollection, Mode=OneWay}"/>
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="AutoGenerateColumns" Value="False"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="CanUserAddRows" Value="False"/>
                                <Setter Property="CanUserDeleteRows" Value="False"/>
                                <Setter Property="CanUserResizeRows" Value="False"/>
                                <Setter Property="CanUserReorderColumns" Value="False"/>
                                <Setter Property="CanUserSortColumns" Value="False"/>
                                <Setter Property="CanUserResizeColumns" Value="False"/>
                                <Setter Property="EnableRowVirtualization" Value="False"/>
                                <Setter Property="SelectionMode" Value="Single"/>
                                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>

                                <Setter Property="RowHeaderTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource RowNumberConvert}}"/>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock TextWrapping="Wrap" Text="{Binding}" TextAlignment="Center"/>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style TargetType="DataGridRow">
                                <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                                <Setter Property="Height" Value="35"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                            </Style>

                            <Style TargetType="{x:Type DataGridCell}">
                                <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                            </Style>
                        </ContentControl.Resources>

                        <ContentControl.Style>
                            <Style TargetType="ContentControl">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource False}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ContentControl">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBox Text="{Binding Path=DistanceBetween, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"
                                                                 Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type StackPanel}, Mode=FindAncestor}}" Padding="5" Height="37"/>
                                                    </StackPanel>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>

                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}"/>
                                            <Condition Binding="{Binding Path=ParalleleRibs}" Value="{StaticResource True}"/>
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Header="Расстояние до следующего ребра, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DistanceLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Отступ слева, мм." Width="Auto">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=IdentToLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Отступ справа, мм." Width="Auto">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=IdentToRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </MultiDataTrigger>

                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}"/>
                                            <Condition Binding="{Binding Path=ParalleleRibs}" Value="{StaticResource False}"/>
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Header="Отступ слева, мм." Width="Auto">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=IdentToLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Отступ справа, мм." Width="Auto">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=IdentToRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Расстояние до ребра слева, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DistanceLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Расстояние до ребра справа, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DistanceRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </MultiDataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContentControl.Style>
                    </ContentControl>
                </Grid>
            </GroupBox>

            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=PlateLength, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="2" Grid.Column="1">
                <TextBox.Style>
                    <Style TargetType="TextBox" BasedOn="{StaticResource TextBoxBase}">
                        <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                        <Setter Property="Text" Value="{Binding Path=PlateWidth, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=ScoseType}" Value="d_rect">
                                <Setter Property="Text" Value="0.00"/>
                                <Setter Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Path=DistanceToFirst, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}">
                <TextBox.Style>
                    <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxBase}">
                        <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}">
                                <Setter Property="Height" Value="0"/>
                                <Setter Property="Visibility" Value="Hidden"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding Path=IdentToLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}">
                <TextBox.Style>
                    <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxBase}">
                        <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}">
                                <Setter Property="Height" Value="0"/>
                                <Setter Property="Visibility" Value="Hidden"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBox Grid.Row="6" Grid.Column="1" Text="{Binding Path=IdentToRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}">
                <TextBox.Style>
                    <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxBase}">
                        <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}">
                                <Setter Property="Height" Value="0"/>
                                <Setter Property="Visibility" Value="Hidden"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <GroupBox Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2" Header="Роспуск слева, мм." FontSize="16" Margin="4">
                <GroupBox.Resources>
                    <Style TargetType="{x:Type RadioButton}">
                        <Setter Property="FontSize" Value="16"/>
                        <Setter Property="Margin" Value="0,0,0,5"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="HorizontalContentAlignment" Value="Left"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=IsChecked, RelativeSource={RelativeSource Self}}" Value="True">
                                <Setter Property="FontWeight" Value="Bold"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </GroupBox.Resources>

                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <RadioButton Grid.Row="0" Grid.Column="0" Content="Одинаковый"
                                 IsChecked="{Binding Path=DiferentDissolutionLeft, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <RadioButton Grid.Row="0" Grid.Column="1" Content="Разный"
                                 IsChecked="{Binding Path=DiferentDissolutionLeft, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <ContentControl Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                        <ContentControl.Resources>
                            <Style TargetType="{x:Type TextBox}">
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <EventSetter Event="PreviewMouseDown"  Handler="IgnoreMouseButton"/>
                                <EventSetter Event="GotFocus"  Handler="Text_GotFocus"/>
                            </Style>

                            <Style TargetType="{x:Type DataGrid}">
                                <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type ContentControl}, Mode=FindAncestor}}"/>
                                <Setter Property="ItemsSource" Value="{Binding Path=RibsCollection, Mode=OneWay}"/>
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="AutoGenerateColumns" Value="False"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="CanUserAddRows" Value="False"/>
                                <Setter Property="CanUserDeleteRows" Value="False"/>
                                <Setter Property="CanUserResizeRows" Value="False"/>
                                <Setter Property="CanUserReorderColumns" Value="False"/>
                                <Setter Property="CanUserSortColumns" Value="False"/>
                                <Setter Property="CanUserResizeColumns" Value="False"/>
                                <Setter Property="EnableRowVirtualization" Value="False"/>
                                <Setter Property="SelectionMode" Value="Single"/>
                                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>

                                <Setter Property="RowHeaderTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource RowNumberConvert}}"/>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style TargetType="DataGridRow">
                                <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                                <Setter Property="Height" Value="35"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                            </Style>

                            <Style TargetType="{x:Type DataGridCell}">
                                <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                            </Style>
                        </ContentControl.Resources>

                        <ContentControl.Style>
                            <Style TargetType="{x:Type ContentControl}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentDissolutionLeft}" Value="{StaticResource False}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ContentControl">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBox Grid.Row="7" Grid.Column="1" Text="{Binding Path=DissolutionLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"
                                                                 Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type StackPanel}, Mode=FindAncestor}}" Padding="5"/>
                                                    </StackPanel>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>

                                    <DataTrigger Binding="{Binding Path=DiferentDissolutionLeft}" Value="{StaticResource True}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DissolutionLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContentControl.Style>
                    </ContentControl>
                </Grid>
            </GroupBox>

            <GroupBox Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="2" Header="Роспуск справа, мм." FontSize="16" Margin="4">
                <GroupBox.Resources>
                    <Style TargetType="{x:Type RadioButton}">
                        <Setter Property="FontSize" Value="16"/>
                        <Setter Property="Margin" Value="0,0,0,5"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="HorizontalContentAlignment" Value="Left"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=IsChecked, RelativeSource={RelativeSource Self}}" Value="True">
                                <Setter Property="FontWeight" Value="Bold"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </GroupBox.Resources>

                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <RadioButton Grid.Row="0" Grid.Column="0" Content="Одинаковый"
                                 IsChecked="{Binding Path=DiferentDissolutionRight, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <RadioButton Grid.Row="0" Grid.Column="1" Content="Разный"
                                 IsChecked="{Binding Path=DiferentDissolutionRight, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <ContentControl Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                        <ContentControl.Resources>
                            <Style TargetType="{x:Type TextBox}">
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <EventSetter Event="PreviewMouseDown"  Handler="IgnoreMouseButton"/>
                                <EventSetter Event="GotFocus"  Handler="Text_GotFocus"/>
                            </Style>

                            <Style TargetType="{x:Type DataGrid}">
                                <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type ContentControl}, Mode=FindAncestor}}"/>
                                <Setter Property="ItemsSource" Value="{Binding Path=RibsCollection, Mode=OneWay}"/>
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="AutoGenerateColumns" Value="False"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="CanUserAddRows" Value="False"/>
                                <Setter Property="CanUserDeleteRows" Value="False"/>
                                <Setter Property="CanUserResizeRows" Value="False"/>
                                <Setter Property="CanUserReorderColumns" Value="False"/>
                                <Setter Property="CanUserSortColumns" Value="False"/>
                                <Setter Property="CanUserResizeColumns" Value="False"/>
                                <Setter Property="EnableRowVirtualization" Value="False"/>
                                <Setter Property="SelectionMode" Value="Single"/>
                                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>

                                <Setter Property="RowHeaderTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource RowNumberConvert}}"/>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style TargetType="DataGridRow">
                                <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                                <Setter Property="Height" Value="35"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                            </Style>

                            <Style TargetType="{x:Type DataGridCell}">
                                <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                            </Style>
                        </ContentControl.Resources>

                        <ContentControl.Style>
                            <Style TargetType="{x:Type ContentControl}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentDissolutionRight}" Value="{StaticResource False}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ContentControl">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBox Grid.Row="7" Grid.Column="1" Text="{Binding Path=DissolutionRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"
                                                                 Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type StackPanel}, Mode=FindAncestor}}" Padding="5"/>
                                                    </StackPanel>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>

                                    <DataTrigger Binding="{Binding Path=DiferentDissolutionRight}" Value="{StaticResource True}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DissolutionRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContentControl.Style>
                    </ContentControl>
                </Grid>
            </GroupBox>

            <TextBox Grid.Row="9" Grid.Column="1" Height="37">
                <TextBox.Style>
                    <Style TargetType="TextBox" BasedOn="{StaticResource TextBoxBase}">
                        <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                        <Setter Property="Text" Value="{Binding Path=BevelToLeft, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=ScoseType}" Value="d_rect">
                                <Setter Property="Text" Value="0.00"/>
                                <Setter Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBox Grid.Row="10" Grid.Column="1">
                <TextBox.Style>
                    <Style TargetType="TextBox" BasedOn="{StaticResource TextBoxBase}">
                        <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                        <Setter Property="Text" Value="{Binding Path=BevelToRight, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=DataContext.DetalObject.ScoseType, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}" Value="d_rect">
                                <Setter Property="Text" Value="0.00"/>
                                <Setter Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBox Grid.Row="11" Grid.Column="1" Text="{Binding Path=RibCount, Mode=TwoWay, FallbackValue=4, UpdateSourceTrigger=LostFocus}" />
        </Grid>
    </DataTemplate>

    <!--Доп. параметры (настила с ребром)-->
    <DataTemplate x:Key="PlitaDopTemplateStyle" DataType="{x:Type ContentControl}">
        <DataTemplate.Resources>
            <Style x:Key="TextBase" TargetType="{x:Type FrameworkElement}">
                <Setter Property="TextElement.FontSize" Value="{StaticResource FontSizeNP4}"/>
                <Setter Property="TextElement.FontFamily" Value="{StaticResource DefaultFont}"/>
                <Setter Property="TextElement.Foreground" Value="{StaticResource ThemeFgP2Brush}"/>
            </Style>

            <Style TargetType="{x:Type Label}" BasedOn="{StaticResource TextBase}">
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
            </Style>

            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBase}">
                <Setter Property="Padding" Value="5"/>
                <Setter Property="Height" Value="37"/>
                <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                <EventSetter Event="PreviewMouseDown" Handler="IgnoreMouseButton"/>
                <EventSetter Event="GotFocus" Handler="Text_GotFocus"/>
            </Style>

            <Style x:Key="groupBoxBase" TargetType="{x:Type GroupBox}" BasedOn="{StaticResource TextBase}">
                <Setter Property="Padding" Value="4"/>
                <Setter Property="Margin" Value="0, 4"/>
            </Style>

            <Style TargetType="{x:Type GroupBox}" BasedOn="{StaticResource groupBoxBase}"></Style>

            <Style TargetType="{x:Type RadioButton}" BasedOn="{StaticResource TextBase}">
                <Setter Property="Margin" Value="0, 4"/>
            </Style>
        </DataTemplate.Resources>

        <Grid DataContext="{Binding Path=DataContext.DetalObject, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Content="Толщина настила, мм."/>
            <Label Grid.Row="1" Grid.Column="0" Content="Толщина ребра, мм."/>
            <Label Grid.Row="2" Grid.Column="0" Content="Высота ребра, мм."/>
            <Label Grid.Row="3" Grid.Column="0" Content="Отступ поиска в начале, мм."/>
            <Label Grid.Row="4" Grid.Column="0" Content="Отступ поиска в конце, мм." FontSize="16"/>
            <Label Grid.Row="5" Grid.Column="0" Content="Перекрытие швов, мм."/>
            <Label Grid.Row="6" Grid.Column="0" Content="Технологический отступ начала шва, мм."/>
            <Label Grid.Row="7" Grid.Column="0" Content="Технологический отступ конца шва, мм."/>
            <Label Grid.Row="8" Grid.Column="0" Content="Дистанция до позиционера для сварки, мм."/>
            <Label Grid.Row="9" Grid.Column="0" Content="Дистанция до позиционера для поиска, мм."/>
            <Label Grid.Row="10" Grid.Column="0" Content="Смещение детали от 0 точки по оси X, мм."/>
            <Label Grid.Row="11" Grid.Column="0" Content="Смещение детали от 0 точки по оси Y, мм."/>
            <Label Grid.Row="12" Grid.Column="0" Content="Обратный прогиб, мм."/>

            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Path=PlateThickness, Mode=TwoWay, TargetNullValue=00, FallbackValue=00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=RibThickness, Mode=TwoWay, TargetNullValue=00, FallbackValue=00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Vertical">
                <TextBox Name="textBoxHieght" Text="{Binding Path=RibHeight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

                <Popup PlacementTarget="{Binding ElementName=textBoxHieght}"
                                       IsOpen="{Binding IsKeyboardFocused, ElementName=textBoxHieght, Mode=OneWay}"
                                       AllowsTransparency="True" AllowDrop="True"
                                       Placement="Right">

                    <Border Background="#FF68DDFF" Height="45" Width="170" Padding="2" CornerRadius="3" Opacity="0.90">
                        <TextBlock FontSize="14" FontStyle="Italic"
                                   Text="Отклонение до 40 мм. можно игнорировать" TextWrapping="Wrap"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                </Popup>
            </StackPanel>

            <!--<GroupBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Header="Высота ребра, мм.">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <RadioButton Grid.Row="0" Grid.Column="0" Content="Одинаковая"
                                 IsChecked="{Binding Path=DiferentHight, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <RadioButton Grid.Row="0" Grid.Column="1" Content="Разная"
                                 IsChecked="{Binding Path=DiferentHight, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <GroupBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Header="С двух сторон">
                        <GroupBox.Style>
                            <Style TargetType="{x:Type GroupBox}" BasedOn="{StaticResource groupBoxBase}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentHight}" Value="{StaticResource False}">
                                        <Setter Property="Height" Value="0"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </GroupBox.Style>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <RadioButton Grid.Row="0" Grid.Column="0" Content="Одинаковая"
                                         IsChecked="{Binding Path=DiferentHightLeftToRight, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>
                            <RadioButton Grid.Row="0" Grid.Column="1" Content="Разная"
                                         IsChecked="{Binding Path=DiferentHightLeftToRight, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>
                        </Grid>
                    </GroupBox>

                    <ContentControl Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                        <ContentControl.Resources>
                            <Style TargetType="{x:Type DataGrid}">
                                <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type ContentControl}, Mode=FindAncestor}}"/>
                                <Setter Property="ItemsSource" Value="{Binding Path=RibsCollection, Mode=OneWay}"/>
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="AutoGenerateColumns" Value="False"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="CanUserAddRows" Value="False"/>
                                <Setter Property="CanUserDeleteRows" Value="False"/>
                                <Setter Property="CanUserResizeRows" Value="False"/>
                                <Setter Property="CanUserReorderColumns" Value="False"/>
                                <Setter Property="CanUserSortColumns" Value="False"/>
                                <Setter Property="CanUserResizeColumns" Value="False"/>
                                <Setter Property="EnableRowVirtualization" Value="False"/>
                                <Setter Property="SelectionMode" Value="Single"/>
                                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>

                                <Setter Property="RowHeaderTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource RowNumberConvert}}"/>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock TextWrapping="Wrap" Text="{Binding}" TextAlignment="Center"/>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>

                            <Style TargetType="DataGridRow">
                                <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                                <Setter Property="Height" Value="35"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                            </Style>

                            <Style TargetType="{x:Type DataGridCell}">
                                <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                            </Style>
                        </ContentControl.Resources>

                        <ContentControl.Style>
                            <Style TargetType="{x:Type ContentControl}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentHight}" Value="{StaticResource False}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ContentControl">
                                                    <StackPanel Orientation="Vertical">
                                                        <TextBox Name="textBoxHieght" Text="{Binding Path=RibHeight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

                                                        <Popup PlacementTarget="{Binding ElementName=textBoxHieght}"
                                                               IsOpen="{Binding IsKeyboardFocused, ElementName=textBoxHieght, Mode=OneWay}"
                                                               AllowsTransparency="True" AllowDrop="True"
                                                               Placement="Right">

                                                            <Border Background="#FF68DDFF" Height="45" Width="170" Padding="2" CornerRadius="3" Opacity="0.90">
                                                                <TextBlock FontSize="14" FontStyle="Italic"
                                                                           Text="Отклонение до 40 мм. можно игнорировать" TextWrapping="Wrap"
                                                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                        </Popup>
                                                    </StackPanel>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>

                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding Path=DiferentHight}" Value="{StaticResource True}"/>
                                            <Condition Binding="{Binding Path=DiferentHightLeftToRight}" Value="{StaticResource False}"/>
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid ColumnHeaderStyle="{x:Null}">
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=HightLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </MultiDataTrigger>

                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding Path=DiferentHight}" Value="{StaticResource True}"/>
                                            <Condition Binding="{Binding Path=DiferentHightLeftToRight}" Value="{StaticResource True}"/>
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Header="Слева" Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=HightLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Справа" Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=HightRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </MultiDataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContentControl.Style>
                    </ContentControl>
                </Grid>
            </GroupBox>-->

            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Path=SearchOffsetStart, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding Path=SearchOffsetEnd, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding Path=SeamsOverlap, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="6" Grid.Column="1" Text="{Binding Path=TechOffsetSeamStart, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="7" Grid.Column="1" Text="{Binding Path=TechOffsetSeamEnd, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="8" Grid.Column="1" Text="{Binding Path=DistanceForWelding, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="9" Grid.Column="1" Text="{Binding Path=DistanceForSearch, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="10" Grid.Column="1" Text="{Binding Path=XOffset, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="11" Grid.Column="1" Text="{Binding Path=YOffset, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <TextBox Grid.Row="12" Grid.Column="1" Text="{Binding Path=ReverseDeflection, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
        </Grid>
    </DataTemplate>
    
    <!--Параметры сварки (настила с ребром)-->
    <DataTemplate x:Key="PlitaSvarkaTemplateStyle" DataType="{x:Type ContentControl}">
        <DataTemplate.Resources>
            <Style TargetType="{x:Type Label}">
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
            </Style>

            <Style TargetType="{x:Type TextBox}">
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="Padding" Value="5"/>
                <Setter Property="Height" Value="37"/>
                <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                <EventSetter Event="PreviewMouseDown" Handler="IgnoreMouseButton"/>
                <EventSetter Event="GotFocus" Handler="Text_GotFocus"/>
            </Style>

            <Style TargetType="{x:Type DataGrid}">
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="AutoGenerateColumns" Value="False"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="CanUserAddRows" Value="False"/>
                <Setter Property="CanUserDeleteRows" Value="False"/>
                <Setter Property="CanUserResizeRows" Value="False"/>
                <Setter Property="CanUserReorderColumns" Value="False"/>
                <Setter Property="CanUserSortColumns" Value="False"/>
                <Setter Property="CanUserResizeColumns" Value="False"/>
                <Setter Property="EnableRowVirtualization" Value="False"/>
                <Setter Property="SelectionMode" Value="Single"/>
                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>

                <!--<Setter Property="RowHeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource RowNumberConvert}}"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>-->
            </Style>

            <Style TargetType="DataGridColumnHeader">
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>                
                <Setter Property="ContentTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock Text="{Binding}" TextWrapping="Wrap" TextAlignment="Center"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="DataGridRow">
                <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
            </Style>

            <Style TargetType="{x:Type DataGridCell}">
                <Setter Property="Height" Value="40"/>
                <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type DataGridCell}">
                            <Grid Background="{TemplateBinding Background}">
                                <ContentPresenter VerticalAlignment="Center" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </DataTemplate.Resources>

        <Grid DataContext="{Binding Path=DataContext.DetalObject, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Content="Скорость сварки, см/м"/>
            <Label Grid.Row="1" Grid.Column="0" Content="Номер сварочной программы"/>

            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Path=WildingSpead, Mode=TwoWay,TargetNullValue=0, FallbackValue=0, ConverterCulture='en-us', StringFormat=F0, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=ProgramNom, Mode=TwoWay,TargetNullValue=1, FallbackValue=1, ConverterCulture='en-us', StringFormat=F0, UpdateSourceTrigger=LostFocus}"/>

            <GroupBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Header="Схема сварки" FontSize="16" Margin="4">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <ComboBox Grid.Row="0" Margin="0, 10"
                              ItemsSource="{Binding Path=DataContext.WeldingSchemaCollection, Mode=OneWay, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}"
                              SelectedItem="{Binding Path=SelectedWeldingSchema, Mode=TwoWay}"
                              SelectedIndex="0">

                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=.}" Padding="0,6"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>

                        <ComboBox.ItemContainerStyle>
                            <Style TargetType="{x:Type ComboBoxItem}">
                                <Setter Property="TextBlock.Padding" Value="0,6"/>
                                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                                <Setter Property="TextBlock.VerticalAlignment" Value="Center"/>
                            </Style>
                        </ComboBox.ItemContainerStyle>
                    </ComboBox>

                    <DataGrid Grid.Row="1" 
                              Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}"
                              ItemsSource="{Binding Path=WeldingSchema, Mode=OneWay}">

                        <DataGrid.Resources>
                            <Style TargetType="{x:Type ComboBox}">
                                <Setter Property="MaxDropDownHeight" Value="150"/>
                                <Setter Property="ItemsSource" Value="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGrid, Mode=FindAncestor}, Converter={StaticResource NumbersForWeldingSchemaConvert}}"/>
                                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                
                                <Setter Property="ItemTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <Label VerticalAlignment="Stretch" HorizontalAlignment="Stretch" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                                <TextBlock TextAlignment="Center">
                                                    <!--Text="{Binding Path=.}"-->
                                                    <TextBlock.Text>
                                                        <MultiBinding Converter="{StaticResource StringFormatMultiConvert}" ConverterParameter="({0})">
                                                            <Binding Path="." Mode="OneWay"/>
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                            </Label>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>

                                <!--<Setter Property="ItemContainerStyle">
                                    <Setter.Value>
                                        <Style TargetType="{x:Type ComboBoxItem}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                                                        <Grid ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Auto">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>

                                                            <Border Name="ItemPanel" BorderBrush="Black" BorderThickness="0, 0.1" Background="{Binding Background}">
                                                                <ContentPresenter x:Name="ContentSite"
                                                                                  VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                                                                                  ContentSource="Content" Margin="0, 3"/>
                                                            </Border>
                                                        </Grid>

                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="ItemPanel" Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                                                                <Setter TargetName="ItemPanel" Property="Background" Value="{DynamicResource {x:Static SystemColors.MenuHighlightBrushKey}}"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Setter.Value>
                                </Setter>-->
                            </Style>
                        </DataGrid.Resources>

                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Очередь слева" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <ComboBox SelectedItem="{Binding Path=LeftSide, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn Header="№ ребра"
                                                Binding="{Binding Path=., Mode=OneWay, RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource RowNumberConvert}}"/>

                            <DataGridTemplateColumn Header="Очередь справа" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <ComboBox SelectedItem="{Binding Path=RightSide, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </GroupBox>
        </Grid>
    </DataTemplate>
    
    <!--В разработке-->
    <DataTemplate x:Key="OtherTemplateStyle" DataType="{x:Type ContentControl}">
        <Grid Height="Auto">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="1">
                <Label Content="В разработке" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontWeight="Bold" FontSize="18"/>
            </StackPanel>
        </Grid>
    </DataTemplate>
    
    
    <!--v3-->
    <DataTemplate x:Key="PlitaSvarkaTemplate3Style">
        <DataTemplate.Resources>
            <Style TargetType="{x:Type FrameworkElement}">
                <Setter Property="TextElement.FontFamily" Value="{StaticResource DefaultFont}"/>
                <Setter Property="TextElement.Foreground" Value="{StaticResource ThemeFgP2Brush}"/>
            </Style>

            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="MaxWidth" Value="160"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
                <Setter Property="HorizontalAlignment" Value="Left"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
            </Style>

            <Style TargetType="{x:Type TextBox}">
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="Height" Value="37"/>
                <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="Padding" Value="40,3"/>
                <Setter Property="Margin" Value="10,5,0,5"/>
                <EventSetter Event="PreviewMouseDown" Handler="IgnoreMouseButton"/>
                <EventSetter Event="GotFocus" Handler="Text_GotFocus"/>
                <Setter Property="Tag" Value="{Binding Path=., RelativeSource={RelativeSource Self}, Converter={StaticResource BindingToTagConvert}}"/>
            </Style>

            <Style TargetType="{x:Type GroupBox}">
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="FontWeight" Value="DemiBold"/>
                <Setter Property="Padding" Value="4"/>
                <Setter Property="Margin" Value="0,4,0,0"/>
            </Style>

            <Style TargetType="{x:Type DataGrid}">
                <Setter Property="AutoGenerateColumns" Value="False"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="CanUserAddRows" Value="False"/>
                <Setter Property="CanUserDeleteRows" Value="False"/>
                <Setter Property="CanUserResizeRows" Value="False"/>
                <Setter Property="CanUserReorderColumns" Value="False"/>
                <Setter Property="CanUserSortColumns" Value="False"/>
                <Setter Property="CanUserResizeColumns" Value="False"/>
                <Setter Property="EnableRowVirtualization" Value="False"/>
                <Setter Property="SelectionMode" Value="Single"/>
                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>

                <Setter Property="RowHeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource RowNumberConvert}}"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="DataGridColumnHeader">
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="ContentTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock Text="{Binding}" TextWrapping="Wrap" TextAlignment="Center"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="DataGridRow">
                <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
            </Style>

            <Style TargetType="{x:Type DataGridCell}">
                <Setter Property="Height" Value="40"/>
                <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
            </Style>
        </DataTemplate.Resources>

        <Grid DataContext="{Binding Path=DataContext.SelectedFile.Detal, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}">            
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MaxWidth="180"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Скорость сварки, см/м"/>
            <TextBlock Grid.Row="1" Grid.Column="0" Text="Номер сварочной программы"/>

            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Path=WildingSpead, Mode=TwoWay, ConverterCulture='en-us', StringFormat=F0, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=ProgramNom, Mode=TwoWay, ConverterCulture='en-us', StringFormat=F0, UpdateSourceTrigger=LostFocus}"/>

            <GroupBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Header="Схема сварки">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <ComboBox Grid.Row="0" Margin="0, 10"
                              ItemsSource="{Binding Path=DataContext.WeldingSchemaCollection, Mode=OneWay, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}"
                              SelectedItem="{Binding Path=SelectedWeldingSchema, Mode=TwoWay}"
                              SelectedIndex="0">

                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=.}" Padding="10, 6"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>

                        <ComboBox.ItemContainerStyle>
                            <Style TargetType="{x:Type ComboBoxItem}">
                                <Setter Property="TextBlock.Padding" Value="10,6"/>
                                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                                <Setter Property="TextBlock.VerticalAlignment" Value="Center"/>
                            </Style>
                        </ComboBox.ItemContainerStyle>
                    </ComboBox>

                    <DataGrid Grid.Row="1" TextElement.FontWeight="Normal"
                              Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}"
                              ItemsSource="{Binding Path=WeldingSchema, Mode=OneWay}">

                        <DataGrid.Resources>
                            <Style TargetType="{x:Type ComboBox}">
                                <Setter Property="MaxDropDownHeight" Value="150"/>
                                <Setter Property="ItemsSource" Value="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGrid, Mode=FindAncestor}, Converter={StaticResource NumbersForWeldingSchemaConvert}}"/>
                                <Setter Property="HorizontalContentAlignment" Value="Center"/>

                                <Setter Property="ItemTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <Label VerticalAlignment="Stretch" HorizontalAlignment="Stretch" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                                <TextBlock Text="{Binding Path=.}" TextAlignment="Center"/>
                                            </Label>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>

                                <Setter Property="ItemContainerStyle">
                                    <Setter.Value>
                                        <Style TargetType="{x:Type ComboBoxItem}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                                                        <Grid ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Auto">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>

                                                            <Border Name="ItemPanel" BorderBrush="Black" BorderThickness="0, 0.1" Background="{Binding Background}">
                                                                <ContentPresenter x:Name="ContentSite"
                                                                                  VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                                                                                  ContentSource="Content" Margin="0, 3"/>
                                                            </Border>
                                                        </Grid>

                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="ItemPanel" Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                                                                <Setter TargetName="ItemPanel" Property="Background" Value="{DynamicResource {x:Static SystemColors.MenuHighlightBrushKey}}"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGrid.Resources>

                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Слева" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <ComboBox SelectedItem="{Binding Path=LeftSide, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="Справа" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <ComboBox SelectedItem="{Binding Path=RightSide, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </GroupBox>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="PlitaDopTemplate3Style" DataType="{x:Type ContentControl}">
        <DataTemplate.Resources>
            <Style TargetType="{x:Type FrameworkElement}">
                <Setter Property="TextElement.FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="TextElement.Foreground" Value="{StaticResource ThemeFgP2Brush}"/>
            </Style>

            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="MaxWidth" Value="160"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
                <Setter Property="HorizontalAlignment" Value="Left"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
            </Style>

            <Style TargetType="{x:Type TextBox}">
                <Setter Property="Tag" Value="{Binding Path=., RelativeSource={RelativeSource Self}, Converter={StaticResource BindingToTagConvert}}"/>
                <Setter Property="Height" Value="37"/>
                <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="Padding" Value="45,3"/>
                <Setter Property="Margin" Value="10,5,0,5"/>
                <EventSetter Event="PreviewMouseDown" Handler="IgnoreMouseButton"/>
                <EventSetter Event="GotFocus" Handler="Text_GotFocus"/>
            </Style>
        </DataTemplate.Resources>

        <Grid DataContext="{Binding Path=DataContext.SelectedFile.Detal, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MaxWidth="180"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Толщина настила, мм."/>
            <TextBlock Grid.Row="1" Grid.Column="0" Text="Толщина ребра, мм."/>
            <TextBlock Grid.Row="2" Grid.Column="0" Text="Высота ребра, мм."/>
            <TextBlock Grid.Row="3" Grid.Column="0" Text="Отступ поиска в начале, мм."/>
            <TextBlock Grid.Row="4" Grid.Column="0" Text="Отступ поиска в конце, мм."/>
            <TextBlock Grid.Row="5" Grid.Column="0" Text="Перекрытие швов, мм."/>
            <TextBlock Grid.Row="6" Grid.Column="0" Text="Технологический отступ начала шва, мм."/>
            <TextBlock Grid.Row="7" Grid.Column="0" Text="Технологический отступ конца шва, мм."/>
            <TextBlock Grid.Row="8" Grid.Column="0" Text="Дистанция до позиционера для сварки, мм."/>
            <TextBlock Grid.Row="9" Grid.Column="0" Text="Дистанция до позиционера для поиска, мм."/>
            <TextBlock Grid.Row="10" Grid.Column="0" Text="Смещение детали от 0 точки по оси X, мм."/>
            <TextBlock Grid.Row="11" Grid.Column="0" Text="Смещение детали от 0 точки по оси Y, мм."/>
            <TextBlock Grid.Row="12" Grid.Column="0" Text="Обратный прогиб, мм."/>

            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Path=PlateThickness, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=RibThickness, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

            <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Vertical">
                <TextBox Name="textBoxHieght" Text="{Binding Path=RibHeight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

                <Popup PlacementTarget="{Binding ElementName=textBoxHieght}"
                       IsOpen="{Binding IsKeyboardFocused, ElementName=textBoxHieght, Mode=OneWay}"
                       AllowsTransparency="True" AllowDrop="True"
                       Placement="Bottom"  >
                    <Border Background="{StaticResource ThemePopupBrush}" CornerRadius="3" Opacity="0.90" Padding="15,5">
                        <TextBlock Text="Отклонение до 40 мм. можно игнорировать" TextWrapping="Wrap" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                </Popup>
            </StackPanel>

            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Path=SearchOffsetStart, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding Path=SearchOffsetEnd, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding Path=SeamsOverlap, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="6" Grid.Column="1" Text="{Binding Path=TechOffsetSeamStart, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="7" Grid.Column="1" Text="{Binding Path=TechOffsetSeamEnd, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="8" Grid.Column="1" Text="{Binding Path=DistanceForWelding, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="9" Grid.Column="1" Text="{Binding Path=DistanceForSearch, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="10" Grid.Column="1" Text="{Binding Path=XOffset, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="11" Grid.Column="1" Text="{Binding Path=YOffset, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
            <TextBox Grid.Row="12" Grid.Column="1" Text="{Binding Path=ReverseDeflection, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="PlitaTemplate3Style" DataType="{x:Type ContentControl}">
        <DataTemplate.Resources>            
            <Style TargetType="{x:Type FrameworkElement}">
                <Setter Property="TextElement.FontFamily" Value="{StaticResource DefaultFont}"/>
                <Setter Property="TextElement.Foreground" Value="{StaticResource ThemeFgP2Brush}"/>
            </Style>

            <Style x:Key="TextBlockBase" TargetType="{x:Type TextBlock}">
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="MaxWidth" Value="160"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
                <Setter Property="HorizontalAlignment" Value="Left"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
            </Style>

            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource TextBlockBase}"></Style>

            <Style x:Key="TextBlockDiferentDistance" TargetType="{x:Type TextBlock}" BasedOn="{StaticResource TextBlockBase}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}">
                        <Setter Property="Height" Value="0"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="textBoxBase" TargetType="{x:Type TextBox}">
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="Height" Value="37"/>
                <Setter Property="Width" Value="{Binding Path=Width, RelativeSource={RelativeSource AncestorType={x:Type ColumnDefinition}, Mode=FindAncestor}}"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="Padding" Value="20,3"/>
                <Setter Property="Margin" Value="10,5,0,5"/>
                <EventSetter Event="PreviewMouseDown" Handler="IgnoreMouseButton"/>
                <EventSetter Event="GotFocus" Handler="Text_GotFocus"/>
                <Setter Property="Tag" Value="{Binding Path=., RelativeSource={RelativeSource Self}, Converter={StaticResource BindingToTagConvert}}"/>
            </Style>

            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource textBoxBase}"></Style>

            <Style x:Key="TextBoxkDiferentDistance" TargetType="{x:Type TextBox}" BasedOn="{StaticResource textBoxBase}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}">
                        <Setter Property="Height" Value="0"/>
                        <Setter Property="Margin" Value="0"/>
                        <Setter Property="Visibility" Value="Hidden"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="groupBoxBase" TargetType="{x:Type GroupBox}">
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="FontWeight" Value="DemiBold"/>
                <Setter Property="Padding" Value="4"/>
                <Setter Property="Margin" Value="0, 4"/>
            </Style>

            <Style TargetType="{x:Type GroupBox}" BasedOn="{StaticResource groupBoxBase}"></Style>

            <Style TargetType="{x:Type RadioButton}">
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="FontWeight" Value="Normal"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="Margin" Value="0,5"/>

                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=IsChecked, RelativeSource={RelativeSource Self}}" Value="True">
                        <Setter Property="FontWeight" Value="Bold"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <Style TargetType="{x:Type DataGrid}">
                <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type ContentControl}, Mode=FindAncestor}}"/>
                <Setter Property="ItemsSource" Value="{Binding Path=RibsCollection, Mode=OneWay}"/>
                <Setter Property="FontSize" Value="{StaticResource FontSizeNP2}"/>
                <Setter Property="AutoGenerateColumns" Value="False"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="CanUserAddRows" Value="False"/>
                <Setter Property="CanUserDeleteRows" Value="False"/>
                <Setter Property="CanUserResizeRows" Value="False"/>
                <Setter Property="CanUserReorderColumns" Value="False"/>
                <Setter Property="CanUserSortColumns" Value="False"/>
                <Setter Property="CanUserResizeColumns" Value="False"/>
                <Setter Property="EnableRowVirtualization" Value="False"/>
                <Setter Property="SelectionMode" Value="Single"/>
                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>

                <Setter Property="RowHeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=., RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource RowNumberConvert}}"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="{x:Type DataGridColumnHeader}">
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="ContentTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock TextWrapping="Wrap" Text="{Binding}" TextAlignment="Center"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="{x:Type DataGridRow}">
                <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                <Setter Property="Height" Value="35"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
            </Style>

            <Style TargetType="{x:Type DataGridCell}">
                <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
            </Style>
        </DataTemplate.Resources>

        <Grid Height="Auto" DataContext="{Binding Path=DataContext.SelectedFile.Detal, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MaxWidth="180"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <ComboBox Grid.Row="0" Grid.Column="1" Margin="10,5,0,5"
                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center"
                      FontSize="{DynamicResource FontSizeNP2}" TextElement.FontWeight="Bold"
                      ItemsSource="{Binding Source={x:Static detals:ScoseTypes.Descriptions}, Mode=OneTime}"
                      SelectedItem="{Binding Path=DataContext.SelectedFile.Detal.ScoseType, RelativeSource={RelativeSource AncestorType={x:Type Page}, Mode=FindAncestor},
                                             Converter={StaticResource DescriptionsStaticClassConvert}, Mode=TwoWay}"
                      SelectedIndex="0">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock x:Name="scoseT" Grid.Column="0" Text="{Binding}" VerticalAlignment="Center" Padding="0, 6" Margin="6, 0"/>
                            
                            <Path Grid.Column="1" Stretch="Uniform">
                                <Path.Style>
                                <Style TargetType="{x:Type Path}">
                                    <Setter Property="Fill" Value="Black"/>

                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=Text, ElementName=scoseT}" Value="Прямоугольник">
                                            <Setter Property="Data" Value="{DynamicResource RectangularPathGeomerty}"/>
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding Path=Text, ElementName=scoseT}" Value="С наклоном влево">
                                            <Setter Property="Data" Value="{DynamicResource ParallelogramRightPathGeomerty}"/>
                                            <Setter Property="LayoutTransform">
                                                <Setter.Value>
                                                    <ScaleTransform ScaleX="-1.0"/>
                                                </Setter.Value>
                                            </Setter>
                                            <Setter Property="Fill" Value="Transparent"/>
                                            <Setter Property="Stroke" Value="Black"/>
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding Path=Text, ElementName=scoseT}" Value="С наклоном вправо">
                                            <Setter Property="Data" Value="{DynamicResource ParallelogramRightPathGeomerty}"/>
                                            <Setter Property="Fill" Value="Transparent"/>
                                            <Setter Property="Stroke" Value="Black"/>
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding Path=Text, ElementName=scoseT}" Value="Трапеция">
                                            <Setter Property="Data" Value="{DynamicResource TrapezoidTopPathGeomerty}"/>
                                        </DataTrigger>

                                        <DataTrigger Binding="{Binding Path=Text, ElementName=scoseT}" Value="Перевёрнутая трапеция">
                                            <Setter Property="Data" Value="{DynamicResource TrapezoidTopPathGeomerty}"/>
                                            <Setter Property="LayoutTransform">
                                                <Setter.Value>
                                                    <ScaleTransform ScaleY="-1.0"/>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Path.Style>
                        </Path>
                        </Grid>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
                
                <ComboBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ComboBoxItem}">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                        <Setter Property="TextBlock.Padding" Value="0,10"/>
                        <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                        <Setter Property="TextBlock.VerticalAlignment" Value="Center"/>
                    </Style>
                </ComboBox.ItemContainerStyle>
            </ComboBox>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Форма настила"/>
            <TextBlock Grid.Row="1" Grid.Column="0" Text="Длина настила, мм."/>
            <TextBlock Grid.Row="2" Grid.Column="0" Text="Ширина настила, мм."/>
            <TextBlock Grid.Row="3" Grid.Column="0" Text="Расстояние до осевой линии первого ребра сверху, мм." Style="{StaticResource TextBlockDiferentDistance}"/>
            <TextBlock Grid.Row="5" Grid.Column="0" Text="Расстояние до торца ребра слева, мм." Style="{StaticResource TextBlockDiferentDistance}"/>
            <TextBlock Grid.Row="6" Grid.Column="0" Text="Расстояние до торца ребра справа, мм." Style="{StaticResource TextBlockDiferentDistance}"/>
            <TextBlock Grid.Row="9" Grid.Column="0" Text="Скос слева, мм."/>
            <TextBlock Grid.Row="10" Grid.Column="0" Text="Скос справа, мм."/>
            <TextBlock Grid.Row="11" Grid.Column="0" Text="Количество ребер, шт."/>

            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=PlateLength, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
          
            <TextBox Grid.Row="2" Grid.Column="1">
                <TextBox.Style>
                    <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource textBoxBase}">
                        <Setter Property="Text" Value="{Binding Path=PlateWidth, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                        
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=ScoseType}" Value="d_rect">
                                <Setter Property="Text" Value="0.00"/>
                                <Setter Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Path=DistanceToFirst, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"
                     Style="{StaticResource TextBoxkDiferentDistance}"/>

            <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding Path=IdentToLeft,  Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"
                     Style="{StaticResource TextBoxkDiferentDistance}"/>

            <TextBox Grid.Row="6" Grid.Column="1" Text="{Binding Path=IdentToRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"
                     Style="{StaticResource TextBoxkDiferentDistance}"/>

            <TextBox Grid.Row="9" Grid.Column="1">
                <TextBox.Style>
                    <Style TargetType="TextBox" BasedOn="{StaticResource textBoxBase}">
                        <Setter Property="Text" Value="{Binding Path=BevelToLeft, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=ScoseType}" Value="d_rect">
                                <Setter Property="Text" Value="0.00"/>
                                <Setter Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBox Grid.Row="10" Grid.Column="1">
                <TextBox.Style>
                    <Style TargetType="TextBox" BasedOn="{StaticResource textBoxBase}">
                        <Setter Property="Text" Value="{Binding Path=BevelToRight, Mode=TwoWay, TargetNullValue=0.00, FallbackValue=0.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>

                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=ScoseType}" Value="d_rect">
                                <Setter Property="Text" Value="0.00"/>
                                <Setter Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <TextBox Grid.Row="11" Grid.Column="1" Text="{Binding Path=RibCount, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>

            <GroupBox Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" Header="Расстояние между осевыми линиями рёбер, мм.">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    
                    <RadioButton Grid.Row="0" Grid.Column="0" Content="Одинаковое"
                                 IsChecked="{Binding Path=DiferentDistance, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <RadioButton Grid.Row="0" Grid.Column="1" Content="Разное"
                                 IsChecked="{Binding Path=DiferentDistance, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <GroupBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Header="Рёбра">
                        <GroupBox.Style>
                            <Style TargetType="{x:Type GroupBox}" BasedOn="{StaticResource groupBoxBase}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource False}">
                                        <Setter Property="Height" Value="0"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </GroupBox.Style>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <RadioButton Grid.Column="0" Content="Параллельны"
                                         IsChecked="{Binding Path=ParalleleRibs, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                            <RadioButton Grid.Column="1" Content="Не параллельны"
                                         IsChecked="{Binding Path=ParalleleRibs, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>
                        </Grid>
                    </GroupBox>

                    <ContentControl Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                        <ContentControl.Resources>
                            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource textBoxBase}">
                                <Setter Property="TextElement.FontWeight" Value="Normal"/>
                                <Setter Property="Padding" Value="0, 3"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>
                        </ContentControl.Resources>

                        <ContentControl.Style>
                            <Style TargetType="ContentControl">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentDistance}" Value="{StaticResource False}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ContentControl">
                                                    <TextBox Text="{Binding Path=DistanceBetween, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"
                                                             Margin="5"/>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>

                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}"/>
                                            <Condition Binding="{Binding Path=ParalleleRibs}" Value="{StaticResource True}"/>
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Header="Расстояние до следующего ребра, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DistanceLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Отступ слева, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=IdentToLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Отступ справа, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=IdentToRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </MultiDataTrigger>

                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding Path=DiferentDistance}" Value="{StaticResource True}"/>
                                            <Condition Binding="{Binding Path=ParalleleRibs}" Value="{StaticResource False}"/>
                                        </MultiDataTrigger.Conditions>

                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Header="Отступ слева, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=IdentToLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Отступ справа, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=IdentToRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Расстояние до ребра слева, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DistanceLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>

                                                            <DataGridTemplateColumn Header="Расстояние до ребра справа, мм." Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DistanceRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </MultiDataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContentControl.Style>
                    </ContentControl>
                </Grid>
            </GroupBox>

            <GroupBox Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2" Header="Роспуск слева, мм.">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <RadioButton Grid.Row="0" Grid.Column="0" Content="Одинаковый"
                                 IsChecked="{Binding Path=DiferentDissolutionLeft, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>
                    <RadioButton Grid.Row="0" Grid.Column="1" Content="Разный"
                                 IsChecked="{Binding Path=DiferentDissolutionLeft, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>
                    
                    <ContentControl Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                        <ContentControl.Resources>
                            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource textBoxBase}">
                                <Setter Property="TextElement.FontWeight" Value="Normal"/>
                                <Setter Property="Padding" Value="0, 3"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>

                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="Height" Value="0"/>
                            </Style>
                        </ContentControl.Resources>

                        <ContentControl.Style>
                            <Style TargetType="{x:Type ContentControl}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentDissolutionLeft}" Value="{StaticResource False}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ContentControl">
                                                    <TextBox Text="{Binding Path=DissolutionLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>

                                    <DataTrigger Binding="{Binding Path=DiferentDissolutionLeft}" Value="{StaticResource True}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DissolutionLeft, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContentControl.Style>
                    </ContentControl>            
                </Grid>
            </GroupBox>

            <GroupBox Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="2" Header="Роспуск справа, мм.">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <RadioButton Grid.Row="0" Grid.Column="0" Content="Одинаковый"
                                 IsChecked="{Binding Path=DiferentDissolutionRight, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource False}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>
                    <RadioButton Grid.Row="0" Grid.Column="1" Content="Разный"
                                 IsChecked="{Binding Path=DiferentDissolutionRight, Converter={StaticResource ResourceKey=RadioButtonConvert}, ConverterParameter={StaticResource True}, Mode=TwoWay, TargetNullValue={StaticResource False}}"/>

                    <ContentControl Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
                        <ContentControl.Resources>
                            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource textBoxBase}">
                                <Setter Property="TextElement.FontWeight" Value="Normal"/>
                                <Setter Property="Padding" Value="0, 3"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>

                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="Height" Value="0"/>
                            </Style>
                        </ContentControl.Resources>

                        <ContentControl.Style>
                            <Style TargetType="{x:Type ContentControl}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=DiferentDissolutionRight}" Value="{StaticResource False}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ContentControl">
                                                    <TextBox Text="{Binding Path=DissolutionRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>

                                    <DataTrigger Binding="{Binding Path=DiferentDissolutionRight}" Value="{StaticResource True}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ContentControl}">
                                                    <DataGrid>
                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBox Text="{Binding Path=DissolutionRight, Mode=TwoWay, TargetNullValue=00.00, FallbackValue=00.00, ConverterCulture='en-us', StringFormat=F2, UpdateSourceTrigger=LostFocus}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContentControl.Style>
                    </ContentControl>
                </Grid>
            </GroupBox>
        </Grid>
    </DataTemplate>
</ResourceDictionary>