<TreeView x:Class="ForRobot.Views.Controls.SceneItemsTreeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ForRobot.Views.Controls"
             xmlns:file="clr-namespace:ForRobot.Model.File3D"
             mc:Ignorable="d">
    
    <TreeView.Resources>
        <Style x:Key="TextBase" TargetType="{x:Type FrameworkElement}">
            <Setter Property="TextElement.FontFamily" Value="DefaultFont"/>
            <Setter Property="TextElement.Foreground" Value="{StaticResource ThemeFgP2Brush}"/>
        </Style>
        
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
        </Style>
        
        <HierarchicalDataTemplate DataType="{x:Type file:SceneItem}"
                                  ItemsSource="{Binding Path=Children, Mode=OneWay, NotifyOnSourceUpdated=True}">

            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <ToggleButton Grid.Column="0" IsChecked="{Binding Path=IsVisible}" Height="20" Width="20">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Path Fill="Black" Stretch="Uniform" StrokeThickness="1">
                                <Path.Style>
                                    <Style TargetType="{x:Type Path}">
                                        <Setter Property="Data" Value="{DynamicResource EyePathGeomerty}"/>

                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsChecked, RelativeSource={RelativeSource AncestorType={x:Type ToggleButton}, Mode=FindAncestor}}" Value="False">
                                                <Setter Property="Data" Value="{DynamicResource EyeOffPathGeomerty}"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Path.Style>
                            </Path>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>

                <!--<CheckBox Grid.Column="0" IsChecked="{Binding IsVisible, Mode=TwoWay}" VerticalAlignment="Center"/>-->
                <TextBlock Grid.Column="2" Text="{Binding Name}" Background="Aqua"/>
            </Grid>
        </HierarchicalDataTemplate>
    </TreeView.Resources>
</TreeView>
